---
description: Folder structure for Student Portfolio App
globs:
  - "**/*.ts"
  - "**/*.tsx"
alwaysApply: true
---

# Folder Structure - Student Portfolio App

**GOAL:** Every file has a place. Always know where code belongs.

**References:**
- React Project Structure: https://react.dev/learn/start-a-new-react-project
- Feature-based Architecture: https://www.patterns.dev/react/
- Container/Presentational: https://www.patterns.dev/react/presentational-container-pattern/

---

## ðŸ“ Project Structure (STRICT)

```
src/
â”œâ”€â”€ api/                      # API layer (Supabase calls)
â”‚   â”œâ”€â”€ profiles.ts           # Profile API functions
â”‚   â”œâ”€â”€ assignment.ts         # Assignment CRUD
â”‚   â””â”€â”€ assignment-files.ts   # File uploads
â”‚
â”œâ”€â”€ components/               # All UI components
â”‚   â”œâ”€â”€ ui/                   # shadcn/ui (DON'T MODIFY)
â”‚   â”œâ”€â”€ [feature]/            # Feature-specific components
â”‚   â”‚   â”œâ”€â”€ ComponentA.tsx    # Individual component
â”‚   â”‚   â”œâ”€â”€ ComponentB.tsx    # Individual component
â”‚   â”‚   â””â”€â”€ index.tsx         # Composes all (View)
â”‚   â””â”€â”€ layouts/              # Layout components
â”‚
â”œâ”€â”€ pages/                    # Page components (Containers)
â”‚   â”œâ”€â”€ StudentPortfolio.tsx  # Container with state/API
â”‚   â”œâ”€â”€ StudentDashboard.tsx
â”‚   â””â”€â”€ Index.tsx
â”‚
â”œâ”€â”€ hooks/                    # Custom React hooks
â”‚   â”œâ”€â”€ useAuthState.ts
â”‚   â””â”€â”€ use[Feature].ts
â”‚
â”œâ”€â”€ types/                    # TypeScript definitions
â”‚   â”œâ”€â”€ student-portfolio.ts  # Feature-specific types
â”‚   â””â”€â”€ auth.ts
â”‚
â”œâ”€â”€ query-key/                # TanStack Query keys
â”‚   â”œâ”€â”€ student-portfolio.ts
â”‚   â””â”€â”€ profile.ts
â”‚
â”œâ”€â”€ constants/                # Static data & enums
â”‚   â”œâ”€â”€ assignment-status.ts
â”‚   â””â”€â”€ grade-subjects.ts
â”‚
â”œâ”€â”€ contexts/                 # React Context providers
â”‚   â””â”€â”€ PortfolioPreviewContext.tsx
â”‚
â”œâ”€â”€ config/                   # App configuration
â”‚   â””â”€â”€ routes.ts
â”‚
â”œâ”€â”€ lib/                      # Utilities & services
â”‚   â”œâ”€â”€ utils.ts              # cn() function
â”‚   â””â”€â”€ logger.ts
â”‚
â”œâ”€â”€ integrations/             # External services
â”‚   â””â”€â”€ supabase/
â”‚       â””â”€â”€ client.ts
â”‚
â””â”€â”€ App.tsx                   # Main app with routing
```

---

## ðŸ“ Where Code Belongs

### New Page/Screen â†’ Create 4 Files

```
1. pages/[Feature].tsx           â† Container (state, API, logic)
2. components/[feature]/         â† Folder for UI components
   â”œâ”€â”€ [Component].tsx           â† Individual UI components
   â””â”€â”€ index.tsx                 â† Composes all (View)
3. types/[feature].ts            â† Types for this feature
4. query-key/[feature].ts        â† Query keys for API calls
```

### API Functions â†’ `api/`

```typescript
// âœ… api/profiles.ts
export const getProfileInfo = async (id: string) => {
  const { data, error } = await supabase
    .from("profiles")
    .select("*")
    .eq("id", id)
    .single();
  return { data, error };
};
```

### Custom Hooks â†’ `hooks/`

```typescript
// âœ… hooks/useStudentAssignments.ts
export function useStudentAssignments(userId: string) {
  return useQuery({
    queryKey: ASSIGNMENT_KEYS.list(userId),
    queryFn: () => getAssignments(userId),
  });
}
```

### Types â†’ `types/`

```typescript
// âœ… types/student-portfolio.ts
export interface StudentProfile {
  id: string;
  full_name: string | null;
  grade: string | null;
}

export interface ProfileAvatarProps {
  image: string | null;
  name: string;
  className?: string;
}
```

### Query Keys â†’ `query-key/`

```typescript
// âœ… query-key/student-portfolio.ts
export const STUDENT_PORTFOLIO_KEYS = {
  studentInfo: (id: string) => ["studentInfo", id] as const,
  assignments: (id: string) => ["assignments", id] as const,
} as const;
```

### UI Components â†’ `components/[feature]/`

```typescript
// âœ… components/student-portfolio/ProfileAvatar.tsx
function ProfileAvatar({ image, name, className }: ProfileAvatarProps) {
  return (
    <div className={cn("h-20 w-20 rounded-full", className)}>
      {/* UI only, no API calls */}
    </div>
  );
}
```

---

## ðŸ“ File Naming Conventions

| Type | Convention | Example |
|------|------------|---------|
| Pages | PascalCase | `StudentPortfolio.tsx` |
| Components | PascalCase | `ProfileAvatar.tsx` |
| Component folder | kebab-case | `student-portfolio/` |
| Hooks | camelCase with `use` | `useAuthState.ts` |
| Types | kebab-case | `student-portfolio.ts` |
| Query keys | kebab-case | `student-portfolio.ts` |
| API | kebab-case | `assignment-files.ts` |
| Utils | kebab-case | `date-utils.ts` |

---

## ðŸš« What NOT to Do

```typescript
// âŒ BAD: API call in component
// components/UserCard.tsx
const UserCard = () => {
  const { data } = useQuery(...); // NO! Move to page
};

// âŒ BAD: Types in component file
// components/Card.tsx
interface CardProps { ... } // NO! Move to types/

// âŒ BAD: Inline query keys
useQuery({ queryKey: ["users", id], ... }); // NO! Use query-key/

// âŒ BAD: Random utility files
src/helpers/something.ts // NO! Use lib/

// âŒ BAD: Business logic in component
// components/ItemList.tsx
const filtered = items.filter(i => i.active); // NO! Move to page
```

---

## âœ… Pre-Creation Checklist

Before creating a new file, ask:

- [ ] Is this a page? â†’ `pages/`
- [ ] Is this UI? â†’ `components/[feature]/`
- [ ] Is this a hook? â†’ `hooks/`
- [ ] Is this a type? â†’ `types/`
- [ ] Is this an API call? â†’ `api/`
- [ ] Is this a query key? â†’ `query-key/`
- [ ] Is this a utility? â†’ `lib/`
- [ ] Is this static data? â†’ `constants/`

---

## ðŸŽ¯ Feature Implementation Template

When implementing a new feature like "Teacher Dashboard":

```
1. Create types/teacher-dashboard.ts
   - Define all interfaces

2. Create query-key/teacher-dashboard.ts
   - Define query keys

3. Create api/teacher.ts (if new API needed)
   - API functions

4. Create components/teacher-dashboard/
   - StatsCard.tsx
   - AssignmentList.tsx
   - FilterBar.tsx
   - index.tsx (composes all)

5. Create pages/TeacherDashboard.tsx
   - Container with state/API
   - Uses components/teacher-dashboard
```
